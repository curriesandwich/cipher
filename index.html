<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Randomized Cipher Algorithm</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>Randomized Cipher Algorithm</h1>
        
        <div class="input-section">
            <h2>Encrypt Text</h2>
            <textarea id="plaintext" rows="5" placeholder="Enter plaintext here..."></textarea>
            <button id="generate">Generate Key & Encode</button>
        </div>

        <div class="input-section">
            <h2>Decrypt Text</h2>
            <textarea id="ciphertext" rows="5" placeholder="Enter ciphertext here..."></textarea>
            <input type="text" id="keyInput" placeholder="Enter the key here..." />
            <button id="decode">Decode</button>
        </div>

        <div id="results" class="results">
            <h2>Results:</h2>
            <div class="result-box">
                <h3>Key:</h3>
                <p id="key"></p>
                <button id="copy-key">Copy Key</button>
            </div>
            <div class="result-box">
                <h3>Encoded Text:</h3>
                <p id="encoded"></p>
                <button id="copy-encoded">Copy Encoded Text</button>
            </div>
            <div class="result-box">
                <h3>Decoded Text:</h3>
                <p id="decoded"></p>
            </div>
        </div>
    </div>

    <script src="cipher.js"></script>
    <script>
        document.getElementById('generate').onclick = function() {
            const plaintext = document.getElementById('plaintext').value.trim();
            
            if (!plaintext) {
                alert('Please enter some text to encode.');
                return; // Exit if the input is empty
            }

            const key = generateKey();
            const encodedText = encode(plaintext, key);
            
            document.getElementById('key').innerText = key;
            document.getElementById('encoded').innerText = encodedText;
            document.getElementById('decoded').innerText = ''; // Clear previous decoded text
        };

        document.getElementById('decode').onclick = function() {
            const ciphertext = document.getElementById('ciphertext').value;
            const key = document.getElementById('keyInput').value;
            const decodedText = decode(ciphertext, key);
            
            document.getElementById('decoded').innerText = decodedText;
        };

        document.getElementById('copy-key').onclick = function() {
            const key = document.getElementById('key').innerText;
            navigator.clipboard.writeText(key).then(() => {
                alert('Key copied to clipboard!');
            });
        };

        document.getElementById('copy-encoded').onclick = function() {
            const encodedText = document.getElementById('encoded').innerText;
            navigator.clipboard.writeText(encodedText).then(() => {
                alert('Encoded text copied to clipboard!');
            });
        };
    </script>
</body>
</html>
